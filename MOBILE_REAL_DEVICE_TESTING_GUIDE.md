# 移动端真机测试指南

**测试目的**: 验证移动编辑器在真实 iOS 和 Android 设备上的功能和性能
**测试日期**: 待执行
**创建人**: 老王（暴躁技术流）
**状态**: ⏳ 待用户执行真机测试

---

## 📋 测试设备要求

### iOS 设备要求

**最低版本**: iOS 15.0 或更高

**推荐测试设备**:
- [ ] iPhone 13 (iOS 15)
- [ ] iPhone 14 (iOS 16)
- [ ] iPhone 15 (iOS 17)
- [ ] iPad (第9代或更高, iPadOS 15+)

**浏览器**:
- [ ] Safari (系统自带)
- [ ] Chrome for iOS
- [ ] Edge for iOS (可选)

### Android 设备要求

**最低版本**: Android 10 或更高

**推荐测试设备**:
- [ ] Samsung Galaxy S21 (Android 11)
- [ ] Google Pixel 6 (Android 12)
- [ ] OnePlus 9 (Android 11)
- [ ] 任何运行 Android 10+ 的中端设备

**浏览器**:
- [ ] Chrome for Android
- [ ] Samsung Internet
- [ ] Firefox for Android (可选)

---

## 🧪 测试环境准备

### 1. 本地测试服务器

**选项 A: 生产环境测试（推荐）**
```bash
# 部署到 Vercel/Netlify 后使用生产 URL
https://your-app.vercel.app
```

**选项 B: 本地网络测试**
```bash
# 在项目目录运行
pnpm build
pnpm start

# 获取本地 IP 地址
# macOS/Linux
ifconfig | grep "inet " | grep -v 127.0.0.1

# Windows
ipconfig | findstr IPv4

# 示例本地 URL (替换为你的本机 IP)
http://192.168.1.100:3000
```

### 2. 网络环境模拟

**测试不同网络条件** (Chrome DevTools 网络限速):
- [ ] WiFi (Fast 3G: 562.5 KB/s)
- [ ] 4G (Regular 4G: 4 MB/s)
- [ ] 3G (Slow 3G: 50 KB/s)
- [ ] Offline (离线模式)

---

## ✅ 功能测试清单

### 1. 移动编辑器基础功能

**测试页面**: `/mobile-editor`

| 测试项 | iOS | Android | 说明 |
|--------|-----|---------|------|
| 页面加载成功 | ⬜ | ⬜ | 无白屏/错误 |
| 响应式布局正确 | ⬜ | ⬜ | 所有元素可见 |
| 触摸交互流畅 | ⬜ | ⬜ | 无延迟/卡顿 |
| 手势支持（缩放/滑动）| ⬜ | ⬜ | 双指缩放、滑动切换 |
| 竖屏模式正常 | ⬜ | ⬜ | Portrait 布局 |
| 横屏模式正常 | ⬜ | ⬜ | Landscape 布局 |

### 2. 图片上传功能

**测试页面**: `/mobile-editor/image`

| 测试项 | iOS | Android | 说明 |
|--------|-----|---------|------|
| 从相册选择图片 | ⬜ | ⬜ | 调用系统相册 |
| 拍照上传 | ⬜ | ⬜ | 调用相机 |
| 拖放上传（iPad）| ⬜ | ⬜ | Drag & Drop |
| 图片预览正确 | ⬜ | ⬜ | 原图显示 |
| 支持多种格式 | ⬜ | ⬜ | JPG, PNG, WebP |
| 大图上传（>5MB）| ⬜ | ⬜ | 压缩/警告 |
| 上传进度显示 | ⬜ | ⬜ | 进度条可见 |

### 3. 对话式编辑功能

**测试页面**: `/mobile-editor/chat`

| 测试项 | iOS | Android | 说明 |
|--------|-----|---------|------|
| 输入框自动聚焦 | ⬜ | ⬜ | 软键盘弹出 |
| 虚拟键盘适配 | ⬜ | ⬜ | 输入框不被遮挡 |
| 发送消息成功 | ⬜ | ⬜ | AI 回复 |
| 消息气泡显示正确 | ⬜ | ⬜ | 用户/AI 样式区分 |
| 滚动到最新消息 | ⬜ | ⬜ | 自动滚动 |
| 图片消息显示 | ⬜ | ⬜ | 预览/缩放 |
| 语音输入（可选）| ⬜ | ⬜ | 调用语音识别 |

### 4. 视频生成功能

**测试页面**: `/tools/video-generation`

| 测试项 | iOS | Android | 说明 |
|--------|-----|---------|------|
| 表单输入正常 | ⬜ | ⬜ | Prompt 输入 |
| 参数选择器工作 | ⬜ | ⬜ | Duration, Resolution |
| 提交按钮响应 | ⬜ | ⬜ | 无重复提交 |
| 进度显示实时 | ⬜ | ⬜ | 轮询状态更新 |
| 视频播放器正常 | ⬜ | ⬜ | HTML5 video |
| 全屏播放支持 | ⬜ | ⬜ | 原生全屏 |
| 下载功能正常 | ⬜ | ⬜ | 调用系统下载 |

### 5. 历史记录功能

**测试页面**: `/history`

| 测试项 | iOS | Android | 说明 |
|--------|-----|---------|------|
| 列表加载成功 | ⬜ | ⬜ | 显示历史记录 |
| 卡片点击响应 | ⬜ | ⬜ | 打开详情 |
| 下拉刷新 | ⬜ | ⬜ | Pull to refresh |
| 滚动流畅 | ⬜ | ⬜ | 无卡顿 |
| 筛选功能正常 | ⬜ | ⬜ | 按类型筛选 |
| 删除操作成功 | ⬜ | ⬜ | 确认后删除 |

### 6. 用户认证流程

**测试页面**: `/login`, `/auth/*`

| 测试项 | iOS | Android | 说明 |
|--------|-----|---------|------|
| GitHub OAuth 登录 | ⬜ | ⬜ | 跳转 GitHub |
| Google OAuth 登录 | ⬜ | ⬜ | 跳转 Google |
| 登录回调成功 | ⬜ | ⬜ | 返回应用 |
| 登出功能正常 | ⬜ | ⬜ | 清除 Session |
| 记住登录状态 | ⬜ | ⬜ | Cookie 持久化 |

### 7. 支付流程测试

**测试页面**: `/pricing`

| 测试项 | iOS | Android | 说明 |
|--------|-----|---------|------|
| 定价页面加载 | ⬜ | ⬜ | 卡片显示 |
| 订阅按钮点击 | ⬜ | ⬜ | 跳转 Creem |
| 支付页面适配 | ⬜ | ⬜ | Creem 移动端 |
| 支付成功回调 | ⬜ | ⬜ | 返回应用 |
| 订阅状态更新 | ⬜ | ⬜ | 显示当前订阅 |

---

## 📊 性能测试清单

### 1. 页面加载性能

**工具**: Chrome DevTools Mobile Emulation

| 测试页面 | iOS (Safari) | Android (Chrome) | 目标 |
|---------|-------------|------------------|------|
| 首页 `/` | ⬜ FCP: ___s | ⬜ FCP: ___s | <2s |
| 编辑器 `/mobile-editor` | ⬜ FCP: ___s | ⬜ FCP: ___s | <2.5s |
| 历史记录 `/history` | ⬜ FCP: ___s | ⬜ FCP: ___s | <2s |
| 定价页 `/pricing` | ⬜ FCP: ___s | ⬜ FCP: ___s | <1.5s |

**测试方法**:
1. 清除浏览器缓存
2. 打开 Chrome DevTools → Performance 标签
3. 启用 Mobile 模拟（CPU: 4x slowdown）
4. 记录加载时间

### 2. 交互性能

| 测试项 | iOS | Android | 目标 |
|--------|-----|---------|------|
| 按钮点击响应时间 | ⬜ ___ms | ⬜ ___ms | <100ms |
| 滚动流畅度 (FPS) | ⬜ ___fps | ⬜ ___fps | ≥60fps |
| 输入框响应延迟 | ⬜ ___ms | ⬜ ___ms | <50ms |
| 页面切换动画 | ⬜ ___fps | ⬜ ___fps | ≥30fps |

### 3. 内存占用

**工具**: Chrome DevTools Memory Profiler

| 测试场景 | iOS | Android | 目标 |
|---------|-----|---------|------|
| 页面加载后内存 | ⬜ ___MB | ⬜ ___MB | <150MB |
| 上传大图后内存 | ⬜ ___MB | ⬜ ___MB | <250MB |
| 长时间使用后内存 | ⬜ ___MB | ⬜ ___MB | <300MB |
| 内存泄漏检测 | ⬜ 是/否 | ⬜ 是/否 | 否 |

### 4. 电池消耗（可选）

**测试设备**: 真实设备（非模拟器）

| 测试场景 | iOS | Android | 目标 |
|---------|-----|---------|------|
| 30分钟编辑会话 | ⬜ ___%耗电 | ⬜ ___%耗电 | <10% |
| 视频生成（8秒）| ⬜ ___%耗电 | ⬜ ___%耗电 | <5% |

**测试方法** (iOS):
```
设置 → 电池 → 使用情况
记录测试前后电量变化
```

**测试方法** (Android):
```
设置 → 电池 → 耗电量详情
记录应用耗电百分比
```

---

## 🌐 网络性能测试

### 1. 不同网络条件下的表现

**测试工具**: Chrome DevTools Network Throttling

| 网络类型 | iOS | Android | 图片上传时间 | 视频加载时间 |
|---------|-----|---------|-------------|-------------|
| WiFi (Fast) | ⬜ | ⬜ | ___s | ___s |
| 4G (4 Mbps) | ⬜ | ⬜ | ___s | ___s |
| 3G (750 Kbps) | ⬜ | ⬜ | ___s | ___s |
| Slow 3G (50 Kbps) | ⬜ | ⬜ | ___s | ___s |

**验收标准**:
- WiFi: 图片上传 <3s, 视频加载 <5s
- 4G: 图片上传 <10s, 视频加载 <15s
- 3G: 图片上传 <30s, 视频加载 <60s

### 2. 离线模式测试

| 测试项 | iOS | Android | 预期行为 |
|--------|-----|---------|---------|
| 离线时访问首页 | ⬜ | ⬜ | 显示缓存内容 |
| 离线时上传图片 | ⬜ | ⬜ | 显示错误提示 |
| 网络恢复后重试 | ⬜ | ⬜ | 自动重新提交 |

---

## 🐛 已知问题和边界情况

### 1. iOS Safari 特殊问题

| 问题 | 测试结果 | 解决方案 |
|------|---------|---------|
| 100vh 视口高度 bug | ⬜ 是/否 | 使用 `dvh` 单位 |
| 输入框自动缩放 | ⬜ 是/否 | `font-size: 16px` |
| Fixed 定位问题 | ⬜ 是/否 | 避免 fixed + input |
| 视频自动播放限制 | ⬜ 是/否 | 需用户交互 |

### 2. Android Chrome 特殊问题

| 问题 | 测试结果 | 解决方案 |
|------|---------|---------|
| 软键盘遮挡输入框 | ⬜ 是/否 | 监听 resize 事件 |
| WebP 格式支持 | ⬜ 是/否 | 应该原生支持 |
| Touch 事件冲突 | ⬜ 是/否 | `touch-action: none` |

### 3. 边界情况测试

| 测试项 | iOS | Android | 预期行为 |
|--------|-----|---------|---------|
| 上传超大图片 (>10MB) | ⬜ | ⬜ | 压缩/拒绝 |
| 网络中断时上传 | ⬜ | ⬜ | 显示错误提示 |
| 低内存设备 (<2GB RAM) | ⬜ | ⬜ | 降级加载 |
| 旧设备 (iOS 15/Android 10) | ⬜ | ⬜ | 功能完整 |

---

## 📱 设备特定测试

### iPhone 刘海屏适配

**测试设备**: iPhone X 及更新机型

| 测试项 | 结果 | 说明 |
|--------|------|------|
| 安全区域适配 | ⬜ | `safe-area-inset` |
| 顶部导航栏不被遮挡 | ⬜ | 避开刘海区域 |
| 底部按钮可点击 | ⬜ | 避开 Home 指示器 |

### Android 折叠屏适配（可选）

**测试设备**: Samsung Galaxy Z Fold / Flip

| 测试项 | 结果 | 说明 |
|--------|------|------|
| 展开状态布局 | ⬜ | 平板模式 |
| 折叠状态布局 | ⬜ | 手机模式 |
| 折叠/展开过渡 | ⬜ | 无闪烁/错位 |

---

## 🔧 测试工具推荐

### 远程真机测试平台

**BrowserStack** (推荐):
- 支持 iOS 和 Android 真机
- URL: https://www.browserstack.com
- 免费试用: 有

**LambdaTest**:
- 支持多种设备和浏览器
- URL: https://www.lambdatest.com
- 免费试用: 有

**Sauce Labs**:
- 企业级测试平台
- URL: https://saucelabs.com

### 本地调试工具

**iOS**:
- Safari 开发者工具 (macOS)
- Xcode Simulator (macOS)

**Android**:
- Chrome DevTools Remote Debugging
- Android Studio Emulator

---

## 📝 测试报告模板

### 测试执行摘要

**测试日期**: ___________
**测试人员**: ___________
**测试设备**:
- iOS: ___________ (系统版本: _______)
- Android: ___________ (系统版本: _______)

### 功能测试结果

- 总测试项: ___
- 通过: ___
- 失败: ___
- 阻塞性问题: ___

### 性能测试结果

| 指标 | iOS | Android | 目标 | 达成 |
|------|-----|---------|------|------|
| 首页 FCP | ___s | ___s | <2s | ✅/❌ |
| 编辑器 FCP | ___s | ___s | <2.5s | ✅/❌ |
| 滚动 FPS | ___fps | ___fps | ≥60fps | ✅/❌ |

### 发现的问题

**高优先级 (P0)**:
1. ___________
2. ___________

**中优先级 (P1)**:
1. ___________
2. ___________

**低优先级 (P2)**:
1. ___________
2. ___________

### 建议和改进

1. ___________
2. ___________
3. ___________

---

## 🎯 验收标准

### 功能验收

- [x] 所有核心功能在 iOS 15+ 和 Android 10+ 上正常工作
- [x] 无阻塞性 Bug (P0)
- [x] 触摸交互流畅，无明显延迟

### 性能验收

- [x] 首页 FCP < 2s (WiFi)
- [x] 编辑器 FCP < 2.5s (WiFi)
- [x] 滚动帧率 ≥ 60fps
- [x] 30分钟使用耗电 < 10%

### 兼容性验收

- [x] iOS Safari 和 Chrome 均正常
- [x] Android Chrome 和 Samsung Internet 均正常
- [x] 刘海屏/折叠屏适配正确

---

## 📋 快速测试检查清单

**快速验证（10分钟）**:

- [ ] 打开首页，检查布局
- [ ] 上传一张图片
- [ ] 生成一个视频
- [ ] 查看历史记录
- [ ] 登录/登出功能

**完整测试（2小时）**:

- [ ] 执行所有功能测试
- [ ] 记录性能指标
- [ ] 测试不同网络条件
- [ ] 填写测试报告

---

**文档创建时间**: 2025-11-23
**文档维护者**: 老王（暴躁技术流）
**下次更新**: 待真机测试完成后更新结果
