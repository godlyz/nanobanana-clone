# 开发流程指南

## 问题解决
当前问题：22个重复的开发服务器进程同时运行，导致端口冲突和系统资源浪费。

## 正确的开发流程

### 1. 启动开发服务器
```bash
# 确保没有重复进程
ps aux | grep "next dev" | grep -v grep | awk '{print $2}' | xargs kill -9 2>/dev/null

# 清理缓存
rm -rf .next

# 启动新服务器
pnpm dev
```

### 2. 修改代码后
```bash
# 如果修改了代码，不需要重启服务器，Next.js会自动热重载
# 直接在浏览器中刷新即可看到变化

# 如果需要强制重启，先停止当前服务器：
# Ctrl+C 停止当前终端中的服务器
# 然后重新执行启动流程
```

### 3. 避免重复启动
- ⚠️ **禁止**：不停止旧服务器就启动新服务器
- ✅ **推荐**：每次启动前先检查并停止现有进程
- ✅ **推荐**：使用同一个终端窗口进行开发

### 4. 清理命令
如果遇到重复进程问题，使用以下清理命令：
```bash
# 强制停止所有开发服务器
pkill -9 -f "next dev" && pkill -9 -f "pnpm dev"

# 清理端口
lsof -ti:3000,3001,3002 | xargs kill -9 2>/dev/null

# 清理缓存
rm -rf .next

# 重新启动
pnpm dev
```

### 5. 访问地址
- 默认端口：http://localhost:3000
- 智能对话编辑：http://localhost:3000/tools/chat-edit
- 智能提示词：http://localhost:3000/tools/smart-prompt

## 已实现的功能
✅ QQ/微信风格智能对话编辑界面
✅ 1对1对话历史管理
✅ 参考图片选择和上传功能
✅ 实时状态显示

## 注意事项
- 修改代码后Next.js会自动热重载，无需手动重启
- 如果修改了环境变量配置文件，需要重启服务器
- 遇到端口冲突时，使用清理命令重新开始